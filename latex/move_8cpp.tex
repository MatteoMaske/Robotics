\hypertarget{move_8cpp}{}\doxysection{cpp\+\_\+publisher/src/move.cpp File Reference}
\label{move_8cpp}\index{cpp\_publisher/src/move.cpp@{cpp\_publisher/src/move.cpp}}


File containing the move node, which manage all the movement of the robot.  


{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$Eigen/\+Dense$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
{\ttfamily \#include $<$ros/ros.\+h$>$}\newline
{\ttfamily \#include $<$std\+\_\+msgs/\+Float64\+Multi\+Array.\+h$>$}\newline
{\ttfamily \#include $<$std\+\_\+msgs/\+Byte.\+h$>$}\newline
{\ttfamily \#include $<$std\+\_\+msgs/\+String.\+h$>$}\newline
{\ttfamily \#include $<$sensor\+\_\+msgs/\+Joint\+State.\+h$>$}\newline
{\ttfamily \#include $<$cpp\+\_\+publisher/\+Coordinates.\+h$>$}\newline
{\ttfamily \#include $<$cpp\+\_\+publisher/\+Move\+Operation.\+h$>$}\newline
{\ttfamily \#include $<$ros\+\_\+impedance\+\_\+controller/generic\+\_\+float.\+h$>$}\newline
{\ttfamily \#include \char`\"{}kinematics\+Ur5.\+cpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}frame2frame.\+cpp\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{move_8cpp_ad72dbcf6d0153db1b8d8a58001feed83}{DEBUG}}~0
\begin{DoxyCompactList}\small\item\em Flag to slow down the movement process. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_afe671b627b7b8f5f2971605e80d05740}{MANUAL\+\_\+\+CONTROL}}~0
\begin{DoxyCompactList}\small\item\em Flag to enable the manual control of the robot. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_a55c39b27d2ae371d22c12917c05334b5}{REAL\+\_\+\+ROBOT}}~0
\begin{DoxyCompactList}\small\item\em Flag to enable the real robot mode. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_a6d56c68b27c04942d9d4ed8d481868b4}{LOOPRATE}}~1000
\begin{DoxyCompactList}\small\item\em Loop rate of publisher. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_aff5914af3b158974ab8fb0cd71fe4fc9}{MOVEMENT\+\_\+\+VELOCITY}}~0.\+3
\begin{DoxyCompactList}\small\item\em Velocity of the movement while not approaching the block \mbox{[}m/s\mbox{]}. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_a377b6bfcd7b9ec23f993c44c6572d78c}{APPROACH\+\_\+\+VELOCITY}}~0.\+1
\begin{DoxyCompactList}\small\item\em Velocity while approaching the block \mbox{[}m/s\mbox{]}. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_a1903812fa2802b713985ff1d48485726}{ROBOT\+\_\+\+JOINTS}}~6
\begin{DoxyCompactList}\small\item\em Number of joints of the robot. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_a79539d10d499eac5314c82616292d874}{EE\+\_\+\+SOFT\+\_\+\+JOINTS}}~2
\begin{DoxyCompactList}\small\item\em Number of joints of the soft gripper. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_a2c0008ecc18a25f19976ebe14f7f56a6}{EE\+\_\+\+HARD\+\_\+\+JOINTS}}~3
\begin{DoxyCompactList}\small\item\em Number of joints of the hard gripper. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{move_8cpp_a5b7c56222e2dced20f48d197e7139bb0}{HARD\+\_\+\+GRIPPER}}~1
\begin{DoxyCompactList}\small\item\em Flag to enable the hard gripper. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Matrix\+Xf \mbox{\hyperlink{move_8cpp_a56d6134c1e6ec94c9cd352aab0b4d7b4}{current\+Joint}} (1, 6)
\begin{DoxyCompactList}\small\item\em Current joint state of the robot. \end{DoxyCompactList}\item 
Vector3f \mbox{\hyperlink{move_8cpp_a364851d9ef1c2e8fccb6e23b64e5cb13}{xe}} (float t, Vector3f xef, Vector3f xe0, const float \&movement\+Time)
\begin{DoxyCompactList}\small\item\em The position to be reach at an instance t whilst moving from xe0 to xef (linear interpolation of the position) \end{DoxyCompactList}\item 
Matrix\+Xf \mbox{\hyperlink{move_8cpp_a48b254064e5157695acc837d1618dd7a}{to\+Rotation\+Matrix}} (Vector3f euler)
\begin{DoxyCompactList}\small\item\em From euler angles to rotation matrix. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a810e80f53b57fe3ecd5faccde06b5271}{compute\+Movement\+Differential}} (Vector3f target\+Position, Vector3f target\+Orientation, float dt, const bool \&approach)
\begin{DoxyCompactList}\small\item\em Compute the movement using the differential kinematics and relying on a straight line trajectory, with a velocity switching either for approach or for movement. \end{DoxyCompactList}\item 
Matrix\+Xf \mbox{\hyperlink{move_8cpp_a29bf6f715ca03d96f0a75d4775326037}{inv\+Diff\+Kinemati\+Control\+Complete}} (Matrix\+Xf q, Matrix\+Xf \mbox{\hyperlink{move_8cpp_a364851d9ef1c2e8fccb6e23b64e5cb13}{xe}}, Matrix\+Xf xd, Matrix\+Xf vd, Matrix\+Xf re, Matrix\+Xf phif, Matrix\+Xf kp, Matrix\+Xf kphi)
\begin{DoxyCompactList}\small\item\em Compute the joint velocities qdot using the inverse differential kinematics. \end{DoxyCompactList}\item 
Matrix\+Xf \mbox{\hyperlink{move_8cpp_a296e854598c4f360422f0712e976bb08}{compute\+Orientation\+Error}} (Matrix\+Xf w\+Re, Matrix\+Xf w\+Rd)
\begin{DoxyCompactList}\small\item\em Compute the orientation error between the desired and the current orientation. \end{DoxyCompactList}\item 
Matrix\+Xf \mbox{\hyperlink{move_8cpp_ab0fea49241a2fce9f8134406c143b38a}{jacobian}} (Matrix\+Xf Th)
\begin{DoxyCompactList}\small\item\em Calculate the jacobian matrix. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a0898f9524c144c254f7d6cc6b83fc1d7}{coordinate\+Callback}} (const cpp\+\_\+publisher\+::\+Coordinates\+::\+Const\+Ptr \&coordinate\+Message)
\begin{DoxyCompactList}\small\item\em Callback function for the coordinates sended by the planner. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a9bda042bb6024027fe1099c1aa83459d}{publish\+Joint}} (Matrix\+Xf publish\+Pos)
\begin{DoxyCompactList}\small\item\em Publish the joint angles to the robot, using its specific topic. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a5a79e79d4b706444086a819eecde0430}{publish\+Move\+Operation}} (int block\+Id, bool success)
\begin{DoxyCompactList}\small\item\em Send an ack to the planner in order to communicate the correct execution of the move operation. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a4383e5add33e0ceb38d8d04615698082}{change\+Soft\+Gripper}} (float first\+Val, float second\+Val)
\begin{DoxyCompactList}\small\item\em Change the joint of the soft gripper, publishing to its topic. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a0821cee80412a89217a2d55da29d51e6}{change\+Hard\+Gripper}} (float diameter)
\begin{DoxyCompactList}\small\item\em Change the joint of the hard gripper, publishing to its topic. \end{DoxyCompactList}\item 
Vector3f \mbox{\hyperlink{move_8cpp_a10bee85088ddd758c23b562f21bbfc48}{map\+To\+Gripper\+Joints}} (float diameter)
\begin{DoxyCompactList}\small\item\em This function computes the angles of the gripper joint based on the diameter given. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a75b58ef7c76fc01bf16934ab68e96013}{move\+Object}} (Vector3f pos, Vector3f ori, Vector3f target\+Pos)
\begin{DoxyCompactList}\small\item\em Compute the movement routine to move the object from its position to its target position. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a9a85362704447362263241b6346eef38}{move\+Down}} (float distance)
\begin{DoxyCompactList}\small\item\em Move the robot down by a certain distance on the z axis. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_a5252fcad35f125afab82358feb868fd0}{move\+Up}} (float distance)
\begin{DoxyCompactList}\small\item\em Move the robot up by a certain distance on the z axis. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{move_8cpp_ab7098b19c0fc2c753f563a8b45bdcb31}{generate\+Manual\+Control\+Menu}} ()
\begin{DoxyCompactList}\small\item\em Generate a human readable menu for manual control of the robot with differential commands. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{move_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
ros\+::\+Publisher \mbox{\hyperlink{move_8cpp_a8418b967099e9d0d6a604bdef6f97867}{pub\+\_\+des\+\_\+jstate}}
\begin{DoxyCompactList}\small\item\em Publisher for desired joint state. \end{DoxyCompactList}\item 
ros\+::\+Publisher \mbox{\hyperlink{move_8cpp_a7d4603ac75a1ba4d9f0ca89c04d8d08d}{pub\+\_\+move\+\_\+operation}}
\begin{DoxyCompactList}\small\item\em Publisher for the result of the movement to be sent to the planner. \end{DoxyCompactList}\item 
ros\+::\+Service\+Client \mbox{\hyperlink{move_8cpp_a4aba85911a3ef3c07a03ded34b8ac5c6}{gripper\+Client}}
\begin{DoxyCompactList}\small\item\em Client for the service call to move the gripper. \end{DoxyCompactList}\item 
Matrix\+Xf \mbox{\hyperlink{move_8cpp_acc65db2c474a5714b9c2851555c6066c}{current\+Gripper}}
\begin{DoxyCompactList}\small\item\em Current joint state of the gripper. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
File containing the move node, which manage all the movement of the robot. 

\begin{DoxyAuthor}{Author}
Matteo Mascherin 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2023-\/02-\/17
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2023 
\end{DoxyCopyright}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{move_8cpp_a377b6bfcd7b9ec23f993c44c6572d78c}\label{move_8cpp_a377b6bfcd7b9ec23f993c44c6572d78c}} 
\index{move.cpp@{move.cpp}!APPROACH\_VELOCITY@{APPROACH\_VELOCITY}}
\index{APPROACH\_VELOCITY@{APPROACH\_VELOCITY}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{APPROACH\_VELOCITY}{APPROACH\_VELOCITY}}
{\footnotesize\ttfamily \#define APPROACH\+\_\+\+VELOCITY~0.\+1}



Velocity while approaching the block \mbox{[}m/s\mbox{]}. 

\mbox{\Hypertarget{move_8cpp_ad72dbcf6d0153db1b8d8a58001feed83}\label{move_8cpp_ad72dbcf6d0153db1b8d8a58001feed83}} 
\index{move.cpp@{move.cpp}!DEBUG@{DEBUG}}
\index{DEBUG@{DEBUG}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{DEBUG}{DEBUG}}
{\footnotesize\ttfamily \#define DEBUG~0}



Flag to slow down the movement process. 

\mbox{\Hypertarget{move_8cpp_a2c0008ecc18a25f19976ebe14f7f56a6}\label{move_8cpp_a2c0008ecc18a25f19976ebe14f7f56a6}} 
\index{move.cpp@{move.cpp}!EE\_HARD\_JOINTS@{EE\_HARD\_JOINTS}}
\index{EE\_HARD\_JOINTS@{EE\_HARD\_JOINTS}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{EE\_HARD\_JOINTS}{EE\_HARD\_JOINTS}}
{\footnotesize\ttfamily \#define EE\+\_\+\+HARD\+\_\+\+JOINTS~3}



Number of joints of the hard gripper. 

\mbox{\Hypertarget{move_8cpp_a79539d10d499eac5314c82616292d874}\label{move_8cpp_a79539d10d499eac5314c82616292d874}} 
\index{move.cpp@{move.cpp}!EE\_SOFT\_JOINTS@{EE\_SOFT\_JOINTS}}
\index{EE\_SOFT\_JOINTS@{EE\_SOFT\_JOINTS}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{EE\_SOFT\_JOINTS}{EE\_SOFT\_JOINTS}}
{\footnotesize\ttfamily \#define EE\+\_\+\+SOFT\+\_\+\+JOINTS~2}



Number of joints of the soft gripper. 

\mbox{\Hypertarget{move_8cpp_a5b7c56222e2dced20f48d197e7139bb0}\label{move_8cpp_a5b7c56222e2dced20f48d197e7139bb0}} 
\index{move.cpp@{move.cpp}!HARD\_GRIPPER@{HARD\_GRIPPER}}
\index{HARD\_GRIPPER@{HARD\_GRIPPER}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{HARD\_GRIPPER}{HARD\_GRIPPER}}
{\footnotesize\ttfamily \#define HARD\+\_\+\+GRIPPER~1}



Flag to enable the hard gripper. 

\mbox{\Hypertarget{move_8cpp_a6d56c68b27c04942d9d4ed8d481868b4}\label{move_8cpp_a6d56c68b27c04942d9d4ed8d481868b4}} 
\index{move.cpp@{move.cpp}!LOOPRATE@{LOOPRATE}}
\index{LOOPRATE@{LOOPRATE}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{LOOPRATE}{LOOPRATE}}
{\footnotesize\ttfamily \#define LOOPRATE~1000}



Loop rate of publisher. 

\mbox{\Hypertarget{move_8cpp_afe671b627b7b8f5f2971605e80d05740}\label{move_8cpp_afe671b627b7b8f5f2971605e80d05740}} 
\index{move.cpp@{move.cpp}!MANUAL\_CONTROL@{MANUAL\_CONTROL}}
\index{MANUAL\_CONTROL@{MANUAL\_CONTROL}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{MANUAL\_CONTROL}{MANUAL\_CONTROL}}
{\footnotesize\ttfamily \#define MANUAL\+\_\+\+CONTROL~0}



Flag to enable the manual control of the robot. 

\mbox{\Hypertarget{move_8cpp_aff5914af3b158974ab8fb0cd71fe4fc9}\label{move_8cpp_aff5914af3b158974ab8fb0cd71fe4fc9}} 
\index{move.cpp@{move.cpp}!MOVEMENT\_VELOCITY@{MOVEMENT\_VELOCITY}}
\index{MOVEMENT\_VELOCITY@{MOVEMENT\_VELOCITY}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{MOVEMENT\_VELOCITY}{MOVEMENT\_VELOCITY}}
{\footnotesize\ttfamily \#define MOVEMENT\+\_\+\+VELOCITY~0.\+3}



Velocity of the movement while not approaching the block \mbox{[}m/s\mbox{]}. 

\mbox{\Hypertarget{move_8cpp_a55c39b27d2ae371d22c12917c05334b5}\label{move_8cpp_a55c39b27d2ae371d22c12917c05334b5}} 
\index{move.cpp@{move.cpp}!REAL\_ROBOT@{REAL\_ROBOT}}
\index{REAL\_ROBOT@{REAL\_ROBOT}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{REAL\_ROBOT}{REAL\_ROBOT}}
{\footnotesize\ttfamily \#define REAL\+\_\+\+ROBOT~0}



Flag to enable the real robot mode. 

\mbox{\Hypertarget{move_8cpp_a1903812fa2802b713985ff1d48485726}\label{move_8cpp_a1903812fa2802b713985ff1d48485726}} 
\index{move.cpp@{move.cpp}!ROBOT\_JOINTS@{ROBOT\_JOINTS}}
\index{ROBOT\_JOINTS@{ROBOT\_JOINTS}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{ROBOT\_JOINTS}{ROBOT\_JOINTS}}
{\footnotesize\ttfamily \#define ROBOT\+\_\+\+JOINTS~6}



Number of joints of the robot. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{move_8cpp_a0821cee80412a89217a2d55da29d51e6}\label{move_8cpp_a0821cee80412a89217a2d55da29d51e6}} 
\index{move.cpp@{move.cpp}!changeHardGripper@{changeHardGripper}}
\index{changeHardGripper@{changeHardGripper}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{changeHardGripper()}{changeHardGripper()}}
{\footnotesize\ttfamily void change\+Hard\+Gripper (\begin{DoxyParamCaption}\item[{float}]{diameter }\end{DoxyParamCaption})}



Change the joint of the hard gripper, publishing to its topic. 


\begin{DoxyParams}{Parameters}
{\em current\+Joint} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a4383e5add33e0ceb38d8d04615698082}\label{move_8cpp_a4383e5add33e0ceb38d8d04615698082}} 
\index{move.cpp@{move.cpp}!changeSoftGripper@{changeSoftGripper}}
\index{changeSoftGripper@{changeSoftGripper}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{changeSoftGripper()}{changeSoftGripper()}}
{\footnotesize\ttfamily void change\+Soft\+Gripper (\begin{DoxyParamCaption}\item[{float}]{first\+Val,  }\item[{float}]{second\+Val }\end{DoxyParamCaption})}



Change the joint of the soft gripper, publishing to its topic. 


\begin{DoxyParams}{Parameters}
{\em first\+Val} & \\
\hline
{\em second\+Val} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a810e80f53b57fe3ecd5faccde06b5271}\label{move_8cpp_a810e80f53b57fe3ecd5faccde06b5271}} 
\index{move.cpp@{move.cpp}!computeMovementDifferential@{computeMovementDifferential}}
\index{computeMovementDifferential@{computeMovementDifferential}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{computeMovementDifferential()}{computeMovementDifferential()}}
{\footnotesize\ttfamily void compute\+Movement\+Differential (\begin{DoxyParamCaption}\item[{Vector3f}]{target\+Position,  }\item[{Vector3f}]{target\+Orientation,  }\item[{float}]{dt,  }\item[{const bool \&}]{approach }\end{DoxyParamCaption})}



Compute the movement using the differential kinematics and relying on a straight line trajectory, with a velocity switching either for approach or for movement. 


\begin{DoxyParams}{Parameters}
{\em target\+Position} & \\
\hline
{\em target\+Orientation} & \\
\hline
{\em dt} & \\
\hline
{\em approach} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a296e854598c4f360422f0712e976bb08}\label{move_8cpp_a296e854598c4f360422f0712e976bb08}} 
\index{move.cpp@{move.cpp}!computeOrientationError@{computeOrientationError}}
\index{computeOrientationError@{computeOrientationError}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{computeOrientationError()}{computeOrientationError()}}
{\footnotesize\ttfamily Matrix\+Xf compute\+Orientation\+Error (\begin{DoxyParamCaption}\item[{Matrix\+Xf}]{w\+Re,  }\item[{Matrix\+Xf}]{w\+Rd }\end{DoxyParamCaption})}



Compute the orientation error between the desired and the current orientation. 


\begin{DoxyParams}{Parameters}
{\em w\+Re} & \\
\hline
{\em w\+Rd} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Matrix\+Xf 
\end{DoxyReturn}
\mbox{\Hypertarget{move_8cpp_a0898f9524c144c254f7d6cc6b83fc1d7}\label{move_8cpp_a0898f9524c144c254f7d6cc6b83fc1d7}} 
\index{move.cpp@{move.cpp}!coordinateCallback@{coordinateCallback}}
\index{coordinateCallback@{coordinateCallback}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{coordinateCallback()}{coordinateCallback()}}
{\footnotesize\ttfamily void coordinate\+Callback (\begin{DoxyParamCaption}\item[{const cpp\+\_\+publisher\+::\+Coordinates\+::\+Const\+Ptr \&}]{coordinate\+Message }\end{DoxyParamCaption})}



Callback function for the coordinates sended by the planner. 


\begin{DoxyParams}{Parameters}
{\em coordinate\+Message} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a56d6134c1e6ec94c9cd352aab0b4d7b4}\label{move_8cpp_a56d6134c1e6ec94c9cd352aab0b4d7b4}} 
\index{move.cpp@{move.cpp}!currentJoint@{currentJoint}}
\index{currentJoint@{currentJoint}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{currentJoint()}{currentJoint()}}
{\footnotesize\ttfamily Matrix\+Xf current\+Joint (\begin{DoxyParamCaption}\item[{1}]{,  }\item[{6}]{ }\end{DoxyParamCaption})}



Current joint state of the robot. 

\mbox{\Hypertarget{move_8cpp_ab7098b19c0fc2c753f563a8b45bdcb31}\label{move_8cpp_ab7098b19c0fc2c753f563a8b45bdcb31}} 
\index{move.cpp@{move.cpp}!generateManualControlMenu@{generateManualControlMenu}}
\index{generateManualControlMenu@{generateManualControlMenu}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{generateManualControlMenu()}{generateManualControlMenu()}}
{\footnotesize\ttfamily void generate\+Manual\+Control\+Menu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Generate a human readable menu for manual control of the robot with differential commands. 

\mbox{\Hypertarget{move_8cpp_a29bf6f715ca03d96f0a75d4775326037}\label{move_8cpp_a29bf6f715ca03d96f0a75d4775326037}} 
\index{move.cpp@{move.cpp}!invDiffKinematiControlComplete@{invDiffKinematiControlComplete}}
\index{invDiffKinematiControlComplete@{invDiffKinematiControlComplete}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{invDiffKinematiControlComplete()}{invDiffKinematiControlComplete()}}
{\footnotesize\ttfamily Matrix\+Xf inv\+Diff\+Kinemati\+Control\+Complete (\begin{DoxyParamCaption}\item[{Matrix\+Xf}]{q,  }\item[{Matrix\+Xf}]{xe,  }\item[{Matrix\+Xf}]{xd,  }\item[{Matrix\+Xf}]{vd,  }\item[{Matrix\+Xf}]{re,  }\item[{Matrix\+Xf}]{phif,  }\item[{Matrix\+Xf}]{kp,  }\item[{Matrix\+Xf}]{kphi }\end{DoxyParamCaption})}



Compute the joint velocities qdot using the inverse differential kinematics. 


\begin{DoxyParams}{Parameters}
{\em q} & \\
\hline
{\em xe} & \\
\hline
{\em xd} & \\
\hline
{\em vd} & \\
\hline
{\em re} & \\
\hline
{\em phif} & \\
\hline
{\em kp} & \\
\hline
{\em kphi} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Matrix\+Xf 
\end{DoxyReturn}
\mbox{\Hypertarget{move_8cpp_ab0fea49241a2fce9f8134406c143b38a}\label{move_8cpp_ab0fea49241a2fce9f8134406c143b38a}} 
\index{move.cpp@{move.cpp}!jacobian@{jacobian}}
\index{jacobian@{jacobian}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{jacobian()}{jacobian()}}
{\footnotesize\ttfamily Matrix\+Xf jacobian (\begin{DoxyParamCaption}\item[{Matrix\+Xf}]{Th }\end{DoxyParamCaption})}



Calculate the jacobian matrix. 


\begin{DoxyParams}{Parameters}
{\em Th} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Matrix\+Xf 
\end{DoxyReturn}
\mbox{\Hypertarget{move_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{move_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{move.cpp@{move.cpp}!main@{main}}
\index{main@{main}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}

\mbox{\Hypertarget{move_8cpp_a10bee85088ddd758c23b562f21bbfc48}\label{move_8cpp_a10bee85088ddd758c23b562f21bbfc48}} 
\index{move.cpp@{move.cpp}!mapToGripperJoints@{mapToGripperJoints}}
\index{mapToGripperJoints@{mapToGripperJoints}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{mapToGripperJoints()}{mapToGripperJoints()}}
{\footnotesize\ttfamily Vector3f map\+To\+Gripper\+Joints (\begin{DoxyParamCaption}\item[{float}]{diameter }\end{DoxyParamCaption})}



This function computes the angles of the gripper joint based on the diameter given. 


\begin{DoxyParams}{Parameters}
{\em diameter} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vector3f 
\end{DoxyReturn}
\mbox{\Hypertarget{move_8cpp_a9a85362704447362263241b6346eef38}\label{move_8cpp_a9a85362704447362263241b6346eef38}} 
\index{move.cpp@{move.cpp}!moveDown@{moveDown}}
\index{moveDown@{moveDown}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{moveDown()}{moveDown()}}
{\footnotesize\ttfamily void move\+Down (\begin{DoxyParamCaption}\item[{float}]{distance }\end{DoxyParamCaption})}



Move the robot down by a certain distance on the z axis. 


\begin{DoxyParams}{Parameters}
{\em distance} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a75b58ef7c76fc01bf16934ab68e96013}\label{move_8cpp_a75b58ef7c76fc01bf16934ab68e96013}} 
\index{move.cpp@{move.cpp}!moveObject@{moveObject}}
\index{moveObject@{moveObject}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{moveObject()}{moveObject()}}
{\footnotesize\ttfamily void move\+Object (\begin{DoxyParamCaption}\item[{Vector3f}]{pos,  }\item[{Vector3f}]{ori,  }\item[{Vector3f}]{target\+Pos }\end{DoxyParamCaption})}



Compute the movement routine to move the object from its position to its target position. 


\begin{DoxyParams}{Parameters}
{\em pos} & \\
\hline
{\em ori} & \\
\hline
{\em target\+Pos} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a5252fcad35f125afab82358feb868fd0}\label{move_8cpp_a5252fcad35f125afab82358feb868fd0}} 
\index{move.cpp@{move.cpp}!moveUp@{moveUp}}
\index{moveUp@{moveUp}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{moveUp()}{moveUp()}}
{\footnotesize\ttfamily void move\+Up (\begin{DoxyParamCaption}\item[{float}]{distance }\end{DoxyParamCaption})}



Move the robot up by a certain distance on the z axis. 


\begin{DoxyParams}{Parameters}
{\em distance} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a9bda042bb6024027fe1099c1aa83459d}\label{move_8cpp_a9bda042bb6024027fe1099c1aa83459d}} 
\index{move.cpp@{move.cpp}!publishJoint@{publishJoint}}
\index{publishJoint@{publishJoint}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{publishJoint()}{publishJoint()}}
{\footnotesize\ttfamily void publish\+Joint (\begin{DoxyParamCaption}\item[{Matrix\+Xf}]{publish\+Pos }\end{DoxyParamCaption})}



Publish the joint angles to the robot, using its specific topic. 


\begin{DoxyParams}{Parameters}
{\em publish\+Pos} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a5a79e79d4b706444086a819eecde0430}\label{move_8cpp_a5a79e79d4b706444086a819eecde0430}} 
\index{move.cpp@{move.cpp}!publishMoveOperation@{publishMoveOperation}}
\index{publishMoveOperation@{publishMoveOperation}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{publishMoveOperation()}{publishMoveOperation()}}
{\footnotesize\ttfamily void publish\+Move\+Operation (\begin{DoxyParamCaption}\item[{int}]{block\+Id,  }\item[{bool}]{success }\end{DoxyParamCaption})}



Send an ack to the planner in order to communicate the correct execution of the move operation. 


\begin{DoxyParams}{Parameters}
{\em block\+Id} & \\
\hline
{\em success} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{move_8cpp_a48b254064e5157695acc837d1618dd7a}\label{move_8cpp_a48b254064e5157695acc837d1618dd7a}} 
\index{move.cpp@{move.cpp}!toRotationMatrix@{toRotationMatrix}}
\index{toRotationMatrix@{toRotationMatrix}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{toRotationMatrix()}{toRotationMatrix()}}
{\footnotesize\ttfamily Matrix\+Xf to\+Rotation\+Matrix (\begin{DoxyParamCaption}\item[{Vector3f}]{euler }\end{DoxyParamCaption})}



From euler angles to rotation matrix. 


\begin{DoxyParams}{Parameters}
{\em euler} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Eigen\+::\+Matrix\+Xf 
\end{DoxyReturn}
\mbox{\Hypertarget{move_8cpp_a364851d9ef1c2e8fccb6e23b64e5cb13}\label{move_8cpp_a364851d9ef1c2e8fccb6e23b64e5cb13}} 
\index{move.cpp@{move.cpp}!xe@{xe}}
\index{xe@{xe}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{xe()}{xe()}}
{\footnotesize\ttfamily Vector3f xe (\begin{DoxyParamCaption}\item[{float}]{t,  }\item[{Vector3f}]{xef,  }\item[{Vector3f}]{xe0,  }\item[{const float \&}]{movement\+Time }\end{DoxyParamCaption})}



The position to be reach at an instance t whilst moving from xe0 to xef (linear interpolation of the position) 


\begin{DoxyParams}{Parameters}
{\em t} & time elapsed so far \\
\hline
{\em xef} & final position \\
\hline
{\em xe0} & initial position \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Vector3f reprensenting the position 
\end{DoxyReturn}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{move_8cpp_acc65db2c474a5714b9c2851555c6066c}\label{move_8cpp_acc65db2c474a5714b9c2851555c6066c}} 
\index{move.cpp@{move.cpp}!currentGripper@{currentGripper}}
\index{currentGripper@{currentGripper}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{currentGripper}{currentGripper}}
{\footnotesize\ttfamily Matrix\+Xf current\+Gripper}



Current joint state of the gripper. 

\mbox{\Hypertarget{move_8cpp_a4aba85911a3ef3c07a03ded34b8ac5c6}\label{move_8cpp_a4aba85911a3ef3c07a03ded34b8ac5c6}} 
\index{move.cpp@{move.cpp}!gripperClient@{gripperClient}}
\index{gripperClient@{gripperClient}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{gripperClient}{gripperClient}}
{\footnotesize\ttfamily ros\+::\+Service\+Client gripper\+Client}



Client for the service call to move the gripper. 

\mbox{\Hypertarget{move_8cpp_a8418b967099e9d0d6a604bdef6f97867}\label{move_8cpp_a8418b967099e9d0d6a604bdef6f97867}} 
\index{move.cpp@{move.cpp}!pub\_des\_jstate@{pub\_des\_jstate}}
\index{pub\_des\_jstate@{pub\_des\_jstate}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{pub\_des\_jstate}{pub\_des\_jstate}}
{\footnotesize\ttfamily ros\+::\+Publisher pub\+\_\+des\+\_\+jstate}



Publisher for desired joint state. 

\mbox{\Hypertarget{move_8cpp_a7d4603ac75a1ba4d9f0ca89c04d8d08d}\label{move_8cpp_a7d4603ac75a1ba4d9f0ca89c04d8d08d}} 
\index{move.cpp@{move.cpp}!pub\_move\_operation@{pub\_move\_operation}}
\index{pub\_move\_operation@{pub\_move\_operation}!move.cpp@{move.cpp}}
\doxysubsubsection{\texorpdfstring{pub\_move\_operation}{pub\_move\_operation}}
{\footnotesize\ttfamily ros\+::\+Publisher pub\+\_\+move\+\_\+operation}



Publisher for the result of the movement to be sent to the planner. 

